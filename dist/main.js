(()=>{"use strict";const e=(()=>{let e=[];const t=()=>{let t=[];for(const o of e){let e={name:o.getProjectName(),color:o.getProjectColor()};t.push(e)}window.localStorage.setItem("storedProjectList",JSON.stringify(t))};return{projects:e,addProject:o=>{e.push(o),t()},removeProject:o=>{const n=e.findIndex((e=>e.getProjectName()===o.getProjectName()));e.splice(n,1),t()},getProjects:()=>e,findProjectColor:t=>e.find((e=>e.getProjectName()===t)).getProjectColor(),findProjectGivenName:t=>e.find((e=>e.getProjectName()==t))}})(),t=(e,t)=>{let o=e,n=t;return{getProjectName:()=>o,getProjectColor:()=>n}},o=(()=>{let e=[];const t=()=>{let t=[];for(const o of e){let e={title:o.getTitle(),desc:o.getDescription(),dueDate:o.getDueDate(),project:{name:o.getProject().getProjectName(),color:o.getProject().getProjectColor()},completion:o.getCompletion()};t.push(e)}window.localStorage.setItem("storedTaskList",JSON.stringify(t))};return{addTask:o=>{e.push(o),t()},removeTask:o=>{e=e.filter((e=>e.getTitle()!==o)),t()},outputTasks:()=>{if(0!==e.length)for(let t=0;t<e.length;t++)console.log(`${t}) ${e[t].getTitle()}, ${e[t].getDescription()}, ${e[t].getDueDate()}, ${e[t].getProject().getProjectName()}`);else console.log("There are 0 tasks")},getTasks:()=>e,toggleCompletion:o=>{e.find((e=>e.getTitle()===o)).toggleTaskCompletion(),t()},deleteTasksGivenProject:o=>{e=e.filter((e=>e.getProject()!==o)),t()}}})(),n=(e,t,o,n,c)=>{let l=e,a=t,d=o,s=n,r=Boolean(c);return{getTitle:()=>l,getDescription:()=>a,getDueDate:()=>d,getProject:()=>s,getCompletion:()=>r,toggleTaskCompletion:()=>{r=!r}}},c=(()=>{const t=()=>{c("All Tasks");const e=o.getTasks();for(const t of e)d(t);s()},c=t=>{const o=document.createElement("h2");o.textContent=t,"All Tasks"!==t&&(o.style.color=`${e.findProjectColor(t)}`);const n=document.createElement("div");if(n.classList.add("project-name-container"),n.appendChild(o),"All Tasks"!==t&&"No Project"!==t){const e=document.createElement("span");e.classList.add("delete-task","material-symbols-outlined"),e.id=`${t.replace(" ","-")}`,e.innerHTML="delete",e.addEventListener("click",j),n.appendChild(e)}document.getElementById("main-content").appendChild(n)},a=()=>{const e=document.getElementById("main-content");for(;e.lastChild;)e.lastChild.remove()},d=e=>{const t=e.getTitle().replace(/\s+/g,"-"),o=document.getElementById("main-content"),n=document.createElement("div");n.classList.add("task-card"),n.innerHTML=`\n                <div class="card-left-side">\n                    <div>\n                        <h2>${e.getTitle()}</h2>\n                        <h3>${e.getDescription()}</h3>\n                    </div>\n                    \n                </div>\n                <div class="card-right-side">\n                    <h3>Project: <span style="color: ${e.getProject().getProjectColor()}">${e.getProject().getProjectName()}</span> | Due: ${e.getDueDate()}</h3>\n                    <div>\n                        <span id="${t}-complete" class="complete-task material-symbols-outlined">\n                            done\n                        </span>\n                        \x3c!--<span id="${t}-edit" class="edit-task material-symbols-outlined">\n                            edit_note\n                        </span> --\x3e\n                        <span id="${t}-delete" class="delete-task material-symbols-outlined">\n                            delete\n                        </span>\n                    </div>\n                </div>\n            `,!0===e.getCompletion()&&n.classList.add("completed"),o.appendChild(n),document.getElementById(`${t}-complete`).addEventListener("click",u),document.getElementById(`${t}-delete`).addEventListener("click",p)},s=()=>{document.getElementById("open-task-form").addEventListener("click",r)},r=()=>{l.blurBackground();const t=document.createElement("select");t.name="",t.id="task-project";for(const o of e.projects){let e=document.createElement("option");e.value=o.getProjectName(),e.text=`${o.getProjectName()}`,"No Project"===e.value&&(e.text="No Project Selected",e.hidden=!0),t.appendChild(e)}let o=document.createElement("label");o.textContent="Choose Project";const n=document.createElement("div");n.appendChild(o),n.appendChild(t),document.querySelector(".task-form-inputs").appendChild(n),document.getElementById("task-form").style.display="block",document.getElementById("task-submit").addEventListener("click",m),document.querySelector(".task-cancel").addEventListener("click",i)},i=()=>{document.getElementById("task-form").style.display="none",g(),document.querySelector(".task-form-inputs").lastChild.remove(),l.blurBackground()},m=t=>{t.preventDefault();let c=document.getElementById("task-name").value;if(""===c)return;let l=document.getElementById("task-description").value,a=document.getElementById("task-date").value,s=document.getElementById("task-project").value,r=e.getProjects().find((e=>e.getProjectName()===s));const m=n(c,l,a,r,!1);o.addTask(m),d(m),g(),i()},g=()=>{document.getElementById("task-name").value="",document.getElementById("task-description").value="",document.getElementById("task-date").value="",document.getElementById("task-project").value=""},p=e=>{a();const n=e.target.id.split("-");n.pop();const c=n.join(" ");o.removeTask(c),t()},u=e=>{const n=e.target.id.split("-");n.pop();const c=n.join(" ");o.toggleCompletion(c),a(),t()},j=n=>{console.log(n.target.id),o.deleteTasksGivenProject(e.findProjectGivenName(n.target.id.replace("-"," "))),e.removeProject(e.findProjectGivenName(n.target.id.replace("-"," "))),a(),t(),l.displaySidebar()};return{loadInitialTasks:t,displayProjectTasks:e=>{a();const n=o.getTasks();if("all"===e.target.id)return void t();const l=e.target.id.replace("-"," ");c(l);const s=n.filter((e=>e.getProject().getProjectName().toString()===l));for(const e of s)d(e)}}})(),l=(()=>{const o=e=>{const t=document.getElementById("project-buttons"),o=document.createElement("h3");o.innerHTML=`<span class="project-icon material-symbols-outlined">\n            folder\n            </span>${e.getProjectName()}`,o.style.color=`${e.getProjectColor()}`,o.id=`${e.getProjectName().replace(/\s+/g,"-")}`,o.addEventListener("click",c.displayProjectTasks),t.appendChild(o)},n=()=>{document.getElementById("open-project-form").addEventListener("click",a)},l=()=>{const e=document.getElementById("project-buttons");for(;e.lastChild;)e.lastChild.remove()},a=()=>{document.getElementById("project-form").style.display="block",s(),document.getElementById("project-submit").addEventListener("click",r),document.querySelector(".cancel").addEventListener("click",d)},d=()=>{document.getElementById("project-form").style.display="none",i(),s()},s=()=>{document.querySelector(".blur").classList.toggle("blurred")},r=n=>{n.preventDefault();let c=document.getElementById("project-name").value,l=document.querySelector('input[name="project-color"]:checked').value;const a=t(c,l);e.addProject(a),d(),i(),o(a)},i=()=>{document.getElementById("project-name").value="",document.getElementById("radio-white").checked=!0};return{displaySidebar:()=>{(()=>{l();const t=document.getElementById("project-buttons"),a=document.createElement("h3");a.textContent="Projects",t.appendChild(a);const d=document.createElement("h3");d.innerHTML='<span class="project-icon material-symbols-outlined">\n            folder\n            </span>All Tasks',d.id="all",d.addEventListener("click",c.displayProjectTasks),t.appendChild(d);for(const t of e.projects)o(t);n()})()},blurBackground:s}})();let a=localStorage.getItem("storedProjectList");a=JSON.parse(a||JSON.stringify([{name:"No Project",color:"#ffffff"}]));for(const o of a){const n=t(o.name,o.color);e.addProject(n)}let d=localStorage.getItem("storedTaskList");d=JSON.parse(d||JSON.stringify([]));for(const t of d){const c=e.findProjectGivenName(t.project.name),l=n(t.title,t.desc,t.dueDate,c,t.completion);o.addTask(l)}l.displaySidebar(),c.loadInitialTasks()})();